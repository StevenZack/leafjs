<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="leaf.js"></script>
    <link rel="stylesheet" href="app.css">
</head>

<body>
    <div id="app">
        <span l-if="show">{{counter}}</span>
        <ol>
            <li l-for="list">
                <span>
                    {{title}}, {{_index}}
                    <button l-onclick="'doRemove('+_index+')'">delete</button>
                </span>
                <div>
                    <button l-for="data" l-onclick="'doAddItem('+_index+')'">
                        {{$}},{{_index}}
                    </button>
                </div>
            </li>
        </ol>
        <button onclick="doChange()">click</button>
        <button onclick="doAdd()">add</button>
    </div>
    <script>
        function doRemove(i){
            app.list.removeAt(i)
        }
        function doAddItem(i) {
            app.list.value[i].data.append('more');
        }
        function doAdd() {
            app.list.append({
                title: 'one',
                data: Observable([
                    'one',
                    'two'
                ])
            })
        }
        function doChange() {
            app.show.postValue(!app.show.value);
            app.counter.value++;
            app.counter.notifyChange();
        }
        app = Leaf('app', {
            show: Observable(true),
            counter: Observable(1),
            list: Observable([])
        })
    </script>
</body>

</html>